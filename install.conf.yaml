- defaults:
    link:
      relink: true

- clean: ['~']

- create:
    - ~/.config/git
    - ~/.local/bin

- link:
    ~/.bash_aliases: bash_aliases
    ~/.bashrc: bashrc
    ~/.config/git/config: gitconfig
    ~/.condarc: condarc
    ~/.gitignore_global: gitignore_global
    ~/.latexmkrc: latexmkrc
    ~/.npmrc: npmrc
    ~/.profile: profile
    ~/.vimrc: vimrc

- shell:
    - [touch ~/.gitconfig, Creating the local git config file]

- shell:
    - ["GOROOT=~/.goroot && if ! [ -d $GOROOT ]; then curl https://dl.google.com/go/go1.13.8.linux-amd64.tar.gz | tar -xz -C ~; mv ~/go $GOROOT; fi", Installing Go]

- shell:
    - [GOROOT=~/.goroot GOPATH=~/go && PATH=$GOROOT/bin:$PATH && go get -u github.com/allenai/beaker/cmd/beaker, Installing Beaker]
    - ["DSF_PATH=~/repos/diff-so-fancy && if [ -d $DSF_PATH ]; then cd $DSF_PATH && git pull; else git clone https://github.com/so-fancy/diff-so-fancy $DSF_PATH; fi", Installing diff-so-fancy]
    - [GIT_OPEN_PATH=~/.local/bin/git-open && wget -O "$GIT_OPEN_PATH" 'https://raw.githubusercontent.com/paulirish/git-open/master/git-open' && chmod +x "$GIT_OPEN_PATH", Installing git-open]
    - ["if ! [ -d ~/.globusconnectpersonal ]; then wget -qO- 'https://downloads.globus.org/globus-connect-personal/v3/linux/stable/globusconnectpersonal-latest.tgz' | tar -xz -C ~ && mv ~/globusconnectpersonal-* ~/.globusconnectpersonal; fi", Installing Globus Connect Personal]
    - [pip3 install --user poetry, Installing Poetry]
    # powerline-go v1.15.0 shows the venv segment twice.
    - [GOROOT=~/.goroot GOPATH=~/go && PATH=$GOROOT/bin:$PATH && GO111MODULE=on go get -u github.com/justjanne/powerline-go@6edd83a, Installing powerline-go]
    - ["if ! [ -d ~/.pyenv ]; then curl https://pyenv.run | bash; fi", Installing pyenv]

- link:
    ~/.local/bin/diff-so-fancy: ~/repos/diff-so-fancy/diff-so-fancy
    ~/.local/bin/globusconnect: ~/.globusconnectpersonal/globusconnect
